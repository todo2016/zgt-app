{"version":3,"file":"auth.js","sources":["utils/auth.js"],"sourcesContent":["// 鉴权管理\r\nconst TOKEN_KEY = 'zgt_token'\r\nconst USER_INFO_KEY = 'zgt_user_info'\r\n\r\n// 存储token\r\nexport const setToken = (token) => {\r\n  try {\r\n    uni.setStorageSync(TOKEN_KEY, token)\r\n  } catch (e) {\r\n    console.error('存储token失败:', e)\r\n  }\r\n}\r\n\r\n// 获取token\r\nexport const getToken = () => {\r\n  try {\r\n    return uni.getStorageSync(TOKEN_KEY) || ''\r\n  } catch (e) {\r\n    console.error('获取token失败:', e)\r\n    return ''\r\n  }\r\n}\r\n\r\n// 清除token\r\nexport const removeToken = () => {\r\n  try {\r\n    uni.removeStorageSync(TOKEN_KEY)\r\n  } catch (e) {\r\n    console.error('清除token失败:', e)\r\n  }\r\n}\r\n\r\n// 存储用户信息\r\nexport const setUserInfo = (userInfo) => {\r\n  try {\r\n    uni.setStorageSync(USER_INFO_KEY, userInfo)\r\n  } catch (e) {\r\n    console.error('存储用户信息失败:', e)\r\n  }\r\n}\r\n\r\n// 获取用户信息\r\nexport const getUserInfo = () => {\r\n  try {\r\n    return uni.getStorageSync(USER_INFO_KEY) || null\r\n  } catch (e) {\r\n    console.error('获取用户信息失败:', e)\r\n    return null\r\n  }\r\n}\r\n\r\n// 清除用户信息\r\nexport const removeUserInfo = () => {\r\n  try {\r\n    uni.removeStorageSync(USER_INFO_KEY)\r\n  } catch (e) {\r\n    console.error('清除用户信息失败:', e)\r\n  }\r\n}\r\n\r\n// 清除所有认证信息\r\nexport const clearAuth = () => {\r\n  removeToken()\r\n  removeUserInfo()\r\n}\r\n\r\n// 检查是否已登录\r\nexport const isLoggedIn = () => {\r\n  const token = getToken()\r\n  return !!token\r\n}\r\n\r\n// 登录状态检查\r\nexport const checkLoginStatus = () => {\r\n  if (!isLoggedIn()) {\r\n    uni.reLaunch({\r\n      url: '/pages/login/login'\r\n    })\r\n    return false\r\n  }\r\n  return true\r\n}\r\n"],"names":["uni"],"mappings":";;AACA,MAAM,YAAY;AAClB,MAAM,gBAAgB;AAGV,MAAC,WAAW,CAAC,UAAU;AACjC,MAAI;AACFA,wBAAI,eAAe,WAAW,KAAK;AAAA,EACpC,SAAQ,GAAG;AACVA,kBAAAA,MAAA,MAAA,SAAA,uBAAc,cAAc,CAAC;AAAA,EAC9B;AACH;AAGY,MAAC,WAAW,MAAM;AAC5B,MAAI;AACF,WAAOA,oBAAI,eAAe,SAAS,KAAK;AAAA,EACzC,SAAQ,GAAG;AACVA,kBAAAA,MAAA,MAAA,SAAA,uBAAc,cAAc,CAAC;AAC7B,WAAO;AAAA,EACR;AACH;AAGY,MAAC,cAAc,MAAM;AAC/B,MAAI;AACFA,kBAAG,MAAC,kBAAkB,SAAS;AAAA,EAChC,SAAQ,GAAG;AACVA,kBAAAA,MAAA,MAAA,SAAA,uBAAc,cAAc,CAAC;AAAA,EAC9B;AACH;AAGY,MAAC,cAAc,CAAC,aAAa;AACvC,MAAI;AACFA,wBAAI,eAAe,eAAe,QAAQ;AAAA,EAC3C,SAAQ,GAAG;AACVA,kBAAAA,4CAAc,aAAa,CAAC;AAAA,EAC7B;AACH;AAaY,MAAC,iBAAiB,MAAM;AAClC,MAAI;AACFA,kBAAG,MAAC,kBAAkB,aAAa;AAAA,EACpC,SAAQ,GAAG;AACVA,kBAAAA,4CAAc,aAAa,CAAC;AAAA,EAC7B;AACH;;;;;;"}